
@{
    Page.title = "Product list"; 

    var db = Database.Open("Cafeen") ;
    var selectCommand = "SELECT * FROM Logistics";
    var searchTerm = "";
    <!--This code handles the search for Categories like Øl, or Soda-->
    if(!Request.QueryString["searchDate"].IsEmpty() ) {
        selectCommand = "SELECT * FROM Logistics WHERE Date = @0";
        searchTerm = Request.QueryString["searchDate"];}

    var selectedData = db.Query(selectCommand, searchTerm);
    var grid = new WebGrid(source: selectedData, defaultSort: "Date", rowsPerPage:100);
}

  <!--  <h2>Cafeen List</h2>
    <form method="get">
        <div><!--This code handles the category search->
             <label for="searchDate">Category to look for:</label>
             <input type="text" name="searchDate" value="@Request.QueryString["searchDate"]" />
             <input type="Submit" value="Search Date" /><br/>
             (Leave blank to list all products.)<br/>
        </div>

    </form>
-->
        <!--Adds the coloumns that shows the database, + the edit link + the delete link-->
    <div id="mycharts">
        @grid.GetHtml(
            tableStyle: "grid",
            headerStyle: "head",
            alternatingRowStyle: "alt",
            columns: grid.Columns(
                grid.Column("ID"),
                grid.Column("ProductName"),
                grid.Column("Category"),
                grid.Column("Price"),
                grid.Column("PurchasePrice"),
                grid.Column("Stock"),
                grid.Column("Date")
            )
        )
    </div>

