@{
    Page.title = "Edit Category";



    //Indlæser de variable der er relevante for tilføjelse af nyt produkt. 
    var Category = "";
    var NewCategory = "";
    double NewPrice = 0.0;

          <!--Opens the database and inserts the data from above-->
    var db = Database.Open("Cafeen");

        <!--Collect the existing categories from the Database-->
    var CategoryData = db.Query("SELECT DISTINCT Category FROM Products");

    var PriceCommand = "SELECT ID, Price FROM Category";
    var PriceData = db.Query(PriceCommand);

    //Følgende if-sætning hånterer når siden genindlæses efter tryk på submit-knappen. Produkt tilføjes hvis input er valide.
    if(IsPost){
        Category = Request["ListCategory"];
        NewCategory = Request["NewCategory"];
        NewPrice = Convert.ToDouble(Request.Form["NewPrice"]);
        bool NewPriceCheckbox = Request["NewPriceCheckbox"].AsBool();
        if(NewPriceCheckbox){
            Funcs.EditProduct(Category, NewCategory, NewPrice); //Kalder AddNewProduct-funktionen fra Funcs.cshtml
        }
        else{
            Funcs.EditProduct(Category, NewCategory);
        }
        <!--Makes sure no SQL injection attack occurs, by redirecting to product the page after a product is added-->
        Response.Redirect("~/Members/Products");}
}
    <!--The style section contains yellow boxes for error messages to stand out-->
  <h1>Edit a category</h1>
  <form method="post">
    <fieldset><!--Creates the form to enter in new data to the database-->
      <legend>Edit categories in database</legend>

    <p><label for="Category">Category:</label>
<form name="FormCategory" method="post">
  <select name="ListCategory">
            @foreach(var row in CategoryData)
            {
                <option value="@row.Category">@row.Category</option>
            }
   </select>
</form>


      <p><label for="NewCategory">New category name:</label>
         <input type="text" name="NewCategory" value="@Request.Form["NewCategory"]" />
          @Html.ValidationMessage("Stock")
      </p>
        
        
  <div>
    @Html.CheckBox("NewPriceCheckbox", new { value = "true" })
    <label for="NewPriceCheckbox">Do you want to change all prices for the edited category?</label>


    <div class="reveal-if-active">
      <p><label for="NewPrice">New price:</label>
         <input type="number" name="NewPrice" value="0.0" />

      </p>
    </div>
  </div> 

      <p><input type="submit" name="buttonSubmit" value="Update category" /></p>
    </fieldset>
  </form>
